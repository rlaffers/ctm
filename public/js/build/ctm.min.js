var ctm={};!function(a,b){"function"==typeof define&&define.amd?define(["leaflet"],b):"object"==typeof modules&&module.exports?module.exports=b(require("leaflet")):b(L)}(this,function(a){"use strict";return a.TileLayer.Provider=a.TileLayer.extend({initialize:function(b,c){var d=a.TileLayer.Provider.providers,e=b.split("."),f=e[0],g=e[1];if(!d[f])throw"No such provider ("+f+")";var h={url:d[f].url,options:d[f].options};if(g&&"variants"in d[f]){if(!(g in d[f].variants))throw"No such variant of "+f+" ("+g+")";var i,j=d[f].variants[g];i="string"==typeof j?{variant:j}:j.options,h={url:j.url||h.url,options:a.Util.extend({},h.options,i)}}else"function"==typeof h.url&&(h.url=h.url(e.splice(1,e.length-1).join(".")));var k="file:"===window.location.protocol||h.options.forceHTTP;0===h.url.indexOf("//")&&k&&(h.url="http:"+h.url),h.options.retina&&(c.detectRetina&&a.Browser.retina?c.detectRetina=!1:h.options.retina="");var l=function(a){return-1===a.indexOf("{attribution.")?a:a.replace(/\{attribution.(\w*)\}/,function(a,b){return l(d[b].options.attribution)})};h.options.attribution=l(h.options.attribution);var m=a.Util.extend({},h.options,c);a.TileLayer.prototype.initialize.call(this,h.url,m)}}),a.TileLayer.Provider.providers={OpenStreetMap:{url:"//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",options:{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'},variants:{Mapnik:{},BlackAndWhite:{url:"http://{s}.tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png",options:{maxZoom:18}},DE:{url:"http://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png",options:{maxZoom:18}},France:{url:"http://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png",options:{attribution:"&copy; Openstreetmap France | {attribution.OpenStreetMap}"}},HOT:{url:"http://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",options:{attribution:'{attribution.OpenStreetMap}, Tiles courtesy of <a href="http://hot.openstreetmap.org/" target="_blank">Humanitarian OpenStreetMap Team</a>'}}}},OpenSeaMap:{url:"http://tiles.openseamap.org/seamark/{z}/{x}/{y}.png",options:{attribution:'Map data: &copy; <a href="http://www.openseamap.org">OpenSeaMap</a> contributors'}},OpenTopoMap:{url:"//{s}.tile.opentopomap.org/{z}/{x}/{y}.png",options:{maxZoom:16,attribution:'Map data: {attribution.OpenStreetMap}, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}},Thunderforest:{url:"//{s}.tile.thunderforest.com/{variant}/{z}/{x}/{y}.png",options:{attribution:'&copy; <a href="http://www.opencyclemap.org">OpenCycleMap</a>, {attribution.OpenStreetMap}',variant:"cycle"},variants:{OpenCycleMap:"cycle",Transport:{options:{variant:"transport",maxZoom:19}},TransportDark:{options:{variant:"transport-dark",maxZoom:19}},Landscape:"landscape",Outdoors:"outdoors"}},OpenMapSurfer:{url:"http://openmapsurfer.uni-hd.de/tiles/{variant}/x={x}&y={y}&z={z}",options:{maxZoom:20,variant:"roads",attribution:'Imagery from <a href="http://giscience.uni-hd.de/">GIScience Research Group @ University of Heidelberg</a> &mdash; Map data {attribution.OpenStreetMap}'},variants:{Roads:"roads",AdminBounds:{options:{variant:"adminb",maxZoom:19}},Grayscale:{options:{variant:"roadsg",maxZoom:19}}}},Hydda:{url:"http://{s}.tile.openstreetmap.se/hydda/{variant}/{z}/{x}/{y}.png",options:{variant:"full",attribution:'Tiles courtesy of <a href="http://openstreetmap.se/" target="_blank">OpenStreetMap Sweden</a> &mdash; Map data {attribution.OpenStreetMap}'},variants:{Full:"full",Base:"base",RoadsAndLabels:"roads_and_labels"}},MapQuestOpen:{url:"http://otile{s}.mqcdn.com/tiles/1.0.0/{type}/{z}/{x}/{y}.{ext}",options:{type:"map",ext:"jpg",attribution:'Tiles Courtesy of <a href="http://www.mapquest.com/">MapQuest</a> &mdash; Map data {attribution.OpenStreetMap}',subdomains:"1234"},variants:{OSM:{},Aerial:{options:{type:"sat",attribution:'Tiles Courtesy of <a href="http://www.mapquest.com/">MapQuest</a> &mdash; Portions Courtesy NASA/JPL-Caltech and U.S. Depart. of Agriculture, Farm Service Agency'}},HybridOverlay:{options:{type:"hyb",ext:"png",opacity:.9}}}},MapBox:{url:"//api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}",options:{attribution:'Imagery from <a href="http://mapbox.com/about/maps/">MapBox</a> &mdash; Map data {attribution.OpenStreetMap}',subdomains:"abcd"}},Stamen:{url:"//stamen-tiles-{s}.a.ssl.fastly.net/{variant}/{z}/{x}/{y}.{ext}",options:{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data {attribution.OpenStreetMap}',subdomains:"abcd",minZoom:0,maxZoom:20,variant:"toner",ext:"png"},variants:{Toner:"toner",TonerBackground:"toner-background",TonerHybrid:"toner-hybrid",TonerLines:"toner-lines",TonerLabels:"toner-labels",TonerLite:"toner-lite",Watercolor:{options:{variant:"watercolor",minZoom:1,maxZoom:16}},Terrain:{options:{variant:"terrain",minZoom:4,maxZoom:18,bounds:[[22,-132],[70,-56]]}},TerrainBackground:{options:{variant:"terrain-background",minZoom:4,maxZoom:18,bounds:[[22,-132],[70,-56]]}},TopOSMRelief:{options:{variant:"toposm-color-relief",ext:"jpg",bounds:[[22,-132],[51,-56]]}},TopOSMFeatures:{options:{variant:"toposm-features",bounds:[[22,-132],[51,-56]],opacity:.9}}}},Esri:{url:"//server.arcgisonline.com/ArcGIS/rest/services/{variant}/MapServer/tile/{z}/{y}/{x}",options:{variant:"World_Street_Map",attribution:"Tiles &copy; Esri"},variants:{WorldStreetMap:{options:{attribution:"{attribution.Esri} &mdash; Source: Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan, METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012"}},DeLorme:{options:{variant:"Specialty/DeLorme_World_Base_Map",minZoom:1,maxZoom:11,attribution:"{attribution.Esri} &mdash; Copyright: &copy;2012 DeLorme"}},WorldTopoMap:{options:{variant:"World_Topo_Map",attribution:"{attribution.Esri} &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community"}},WorldImagery:{options:{variant:"World_Imagery",attribution:"{attribution.Esri} &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}},WorldTerrain:{options:{variant:"World_Terrain_Base",maxZoom:13,attribution:"{attribution.Esri} &mdash; Source: USGS, Esri, TANA, DeLorme, and NPS"}},WorldShadedRelief:{options:{variant:"World_Shaded_Relief",maxZoom:13,attribution:"{attribution.Esri} &mdash; Source: Esri"}},WorldPhysical:{options:{variant:"World_Physical_Map",maxZoom:8,attribution:"{attribution.Esri} &mdash; Source: US National Park Service"}},OceanBasemap:{options:{variant:"Ocean_Basemap",maxZoom:13,attribution:"{attribution.Esri} &mdash; Sources: GEBCO, NOAA, CHS, OSU, UNH, CSUMB, National Geographic, DeLorme, NAVTEQ, and Esri"}},NatGeoWorldMap:{options:{variant:"NatGeo_World_Map",maxZoom:16,attribution:"{attribution.Esri} &mdash; National Geographic, Esri, DeLorme, NAVTEQ, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, iPC"}},WorldGrayCanvas:{options:{variant:"Canvas/World_Light_Gray_Base",maxZoom:16,attribution:"{attribution.Esri} &mdash; Esri, DeLorme, NAVTEQ"}}}},OpenWeatherMap:{url:"http://{s}.tile.openweathermap.org/map/{variant}/{z}/{x}/{y}.png",options:{maxZoom:19,attribution:'Map data &copy; <a href="http://openweathermap.org">OpenWeatherMap</a>',opacity:.5},variants:{Clouds:"clouds",CloudsClassic:"clouds_cls",Precipitation:"precipitation",PrecipitationClassic:"precipitation_cls",Rain:"rain",RainClassic:"rain_cls",Pressure:"pressure",PressureContour:"pressure_cntr",Wind:"wind",Temperature:"temp",Snow:"snow"}},HERE:{url:"//{s}.{base}.maps.cit.api.here.com/maptile/2.1/{type}/{mapID}/{variant}/{z}/{x}/{y}/{size}/{format}?app_id={app_id}&app_code={app_code}&lg={language}",options:{attribution:'Map &copy; 1987-2014 <a href="http://developer.here.com">HERE</a>',subdomains:"1234",mapID:"newest",app_id:"<insert your app_id here>",app_code:"<insert your app_code here>",base:"base",variant:"normal.day",maxZoom:20,type:"maptile",language:"eng",format:"png8",size:"256"},variants:{normalDay:"normal.day",normalDayCustom:"normal.day.custom",normalDayGrey:"normal.day.grey",normalDayMobile:"normal.day.mobile",normalDayGreyMobile:"normal.day.grey.mobile",normalDayTransit:"normal.day.transit",normalDayTransitMobile:"normal.day.transit.mobile",normalNight:"normal.night",normalNightMobile:"normal.night.mobile",normalNightGrey:"normal.night.grey",normalNightGreyMobile:"normal.night.grey.mobile",basicMap:{options:{type:"basetile"}},mapLabels:{options:{type:"labeltile",format:"png"}},trafficFlow:{options:{base:"traffic",type:"flowtile"}},carnavDayGrey:"carnav.day.grey",hybridDay:{options:{base:"aerial",variant:"hybrid.day"}},hybridDayMobile:{options:{base:"aerial",variant:"hybrid.day.mobile"}},pedestrianDay:"pedestrian.day",pedestrianNight:"pedestrian.night",satelliteDay:{options:{base:"aerial",variant:"satellite.day"}},terrainDay:{options:{base:"aerial",variant:"terrain.day"}},terrainDayMobile:{options:{base:"aerial",variant:"terrain.day.mobile"}}}},Acetate:{url:"http://a{s}.acetate.geoiq.com/tiles/{variant}/{z}/{x}/{y}.png",options:{attribution:"&copy;2012 Esri & Stamen, Data from OSM and Natural Earth",subdomains:"0123",minZoom:2,maxZoom:18,variant:"acetate-base"},variants:{basemap:"acetate-base",terrain:"terrain",all:"acetate-hillshading",foreground:"acetate-fg",roads:"acetate-roads",labels:"acetate-labels",hillshading:"hillshading"}},FreeMapSK:{url:"http://t{s}.freemap.sk/T/{z}/{x}/{y}.jpeg",options:{minZoom:8,maxZoom:16,subdomains:"1234",bounds:[[47.204642,15.996093],[49.830896,22.576904]],attribution:'{attribution.OpenStreetMap}, vizualization CC-By-SA 2.0 <a href="http://freemap.sk">Freemap.sk</a>'}},MtbMap:{url:"http://tile.mtbmap.cz/mtbmap_tiles/{z}/{x}/{y}.png",options:{attribution:"{attribution.OpenStreetMap} &amp; USGS"}},CartoDB:{url:"http://{s}.basemaps.cartocdn.com/{variant}/{z}/{x}/{y}.png",options:{attribution:'{attribution.OpenStreetMap} &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',subdomains:"abcd",maxZoom:19,variant:"light_all"},variants:{Positron:"light_all",PositronNoLabels:"light_nolabels",PositronOnlyLabels:"light_only_labels",DarkMatter:"dark_all",DarkMatterNoLabels:"dark_nolabels",DarkMatterOnlyLabels:"dark_only_labels"}},HikeBike:{url:"http://{s}.tiles.wmflabs.org/{variant}/{z}/{x}/{y}.png",options:{maxZoom:19,attribution:"{attribution.OpenStreetMap}",variant:"hikebike"},variants:{HikeBike:{},HillShading:{options:{maxZoom:15,variant:"hillshading"}}}},BasemapAT:{url:"//maps{s}.wien.gv.at/basemap/{variant}/normal/google3857/{z}/{y}/{x}.{format}",options:{maxZoom:19,attribution:'Datenquelle: <a href="www.basemap.at">basemap.at</a>',subdomains:["","1","2","3","4"],format:"png",bounds:[[46.35877,8.782379],[49.037872,17.189532]],variant:"geolandbasemap"},variants:{basemap:"geolandbasemap",grau:"bmapgrau",overlay:"bmapoverlay",highdpi:{options:{variant:"bmaphidpi",format:"jpeg"}},orthofoto:{options:{variant:"bmaporthofoto30cm",format:"jpeg"}}}},NASAGIBS:{url:"//map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}{maxZoom}/{z}/{y}/{x}.{format}",options:{attribution:'Imagery provided by services from the Global Imagery Browse Services (GIBS), operated by the NASA/GSFC/Earth Science Data and Information System (<a href="https://earthdata.nasa.gov">ESDIS</a>) with funding provided by NASA/HQ.',bounds:[[-85.0511287776,-179.999999975],[85.0511287776,179.999999975]],minZoom:1,maxZoom:9,format:"jpg",time:"",tilematrixset:"GoogleMapsCompatible_Level"},variants:{ModisTerraTrueColorCR:"MODIS_Terra_CorrectedReflectance_TrueColor",ModisTerraBands367CR:"MODIS_Terra_CorrectedReflectance_Bands367",ViirsEarthAtNight2012:{options:{variant:"VIIRS_CityLights_2012",maxZoom:8}},ModisTerraLSTDay:{options:{variant:"MODIS_Terra_Land_Surface_Temp_Day",format:"png",maxZoom:7,opacity:.75}},ModisTerraSnowCover:{options:{variant:"MODIS_Terra_Snow_Cover",format:"png",maxZoom:8,opacity:.75}},ModisTerraAOD:{options:{variant:"MODIS_Terra_Aerosol",format:"png",maxZoom:6,opacity:.75}},ModisTerraChlorophyll:{options:{variant:"MODIS_Terra_Chlorophyll_A",format:"png",maxZoom:7,opacity:.75}}}},NLS:{url:"//nls-{s}.tileserver.com/{variant}/{z}/{x}/{y}.jpg",options:{attribution:'<a href="http://geo.nls.uk/maps/">National Library of Scotland Historic Maps</a>',bounds:[[49.6,-12],[61.7,3]],minZoom:1,maxZoom:18,subdomains:"0123"},variants:{OS_1900:"NLS_API",OS_1920:"nls",OS_opendata:{url:"http://geo.nls.uk/maps/opendata/{z}/{x}/{y}.png",options:{maxZoom:16}},OS_6inch_1st:{url:"http://geo.nls.uk/maps/os/six_inch/{z}/{x}/{y}.png",options:{tms:!0,minZoom:6,maxZoom:16,bounds:[[49.86261,-8.66444],[60.89421,1.7785]]}},OS_6inch:"os_6_inch_gb",OS_25k:"25k",OS_npe:{url:"http://geo.nls.uk/maps/os/newpopular/{z}/{x}/{y}.png",options:{tms:!0,minZoom:3,maxZoom:15}},OS_7th:"os7gb",OS_London:{options:{variant:"London_1056",minZoom:9,bounds:[[51.177621,-.708618],[51.618016,.355682]]}},GSGS_Ireland:{url:"http://geo.nls.uk/maps/ireland/gsgs4136/{z}/{x}/{y}.png",options:{tms:!0,minZoom:5,maxZoom:15,bounds:[[51.37178,-10.810546],[55.422779,-5.262451]]}}}}},a.tileLayer.provider=function(b,c){return new a.TileLayer.Provider(b,c)},a}),ctm.apiUrl="https://imhd.zoznam.sk/rt/danubehackdata",ctm.mapboxAccessToken="pk.eyJ1IjoicmxhZmZlcnMiLCJhIjoiY2lmdGNyZmZlMDF3N3RkbTBxMmcxcmwzYyJ9.jTqMImbRFKuNS39QXqSuEA",ctm.mapboxId="rlaffers.nnf9dj3d",ctm.refreshRate=1e4,ctm.markMyPosition=function(a){if(!navigator.geolocation)return void console.error("Sorry, no geolocation in your browser.");var b=L.marker([0,0],{});navigator.geolocation.getCurrentPosition(function(a){b.setLatLng([a.coords.latitude,a.coords.longitude]),b.addTo(ctm.map)});var c=function d(){navigator.geolocation.getCurrentPosition(function(a){b.setLatLng([a.coords.latitude,a.coords.longitude])}),setTimeout(d,a)};c()},ctm.addMarker=function(a,b,c,d,e){var f=new ctm.Marker(a,e,[b[0],b[1]],{icon:L.divIcon({className:this.icons[c]+" line-number line-number-"+d,iconSize:[32,25],iconAnchor:[16,25]}),title:"Linka č. "+d+"\n"+ctm.fuzzy(1e3*e)});f.addTo(this.overlays[c])},ctm.Marker=L.Marker.extend({data:{id:null,timestamp:null},initialize:function(a,b,c,d){this.data.id=a,this.data.timestamp=b,L.Marker.prototype.initialize.call(this,c,d)}}),ctm.refresh=function(a,b){a=a||5e3,clearTimeout(ctm._refreshTimeout),void 0!==b&&b!==ctm.getFilter()&&ctm.setFilter(b),ctm.api||(ctm.api=new XMLHttpRequest,ctm.api.onload=function(b){try{var c=JSON.parse(this.responseText);if(!c)throw"Invalid JSON in response from API:\n"+this.responseText;ctm.updateMarkers(c)}catch(d){console.error("Failed to update markers: "+d)}ctm._refreshTimeout=setTimeout(ctm.refresh.bind(ctm,a),a)},ctm.api.onerror=function(a){console.error(a)});var c=ctm.map.getBounds(),d=c.getSouthWest(),e=c.getNorthEast(),f=[d.lng,d.lat,e.lng,e.lat],g="?rect=["+f.join(",")+"]",h=ctm.getFilter();h&&(g=g+"&filter="+h),ctm.api.open("get",this.apiUrl+g),ctm.api.send()},ctm.updateMarkers=function(a){ctm.overlays.trams.clearLayers(),ctm.overlays.buses.clearLayers(),ctm.overlays.trolleys.clearLayers();var b=ctm.getFilter();a=a.data;var c,d,e,f;for(d in a)if(c=a[d],c.linka&&!(c.linka>500)&&(null===b||void 0===b||String(c.linka)===String(b))){switch(f=c.linka,c.typ){case"n":e="buses",f=Number(String(c.linka).substr(1));break;case"a":e="buses";break;case"e":e="trams";break;case"t":e="trolleys"}ctm.addMarker(d,[Number(c.ll[0]),Number(c.ll[1])],e,f,c.cas)}},ctm.getFilter=function(){return ctm.filter},ctm.setFilter=function(a){ctm.filter=a},ctm.clearFilter=function(){ctm.filter=null},ctm.fuzzyStrings={prefixAgo:null,prefixFromNow:null,suffixAgo:"",suffixFromNow:"",inPast:"každú chvíľku",seconds:"menej ako pred minútou",minute:"okolo minúty",minutes:"%d minút",minutes2:"%d minúty",hour:"okolo 1 hodiny",hours:"okolo %d hodín",day:"1 deň",days2:"%d dni",days:"%d dní",month:"okolo 1 mesiaca",months:"%d mesiacov",months2:"%d mesiace",year:"okolo 1 roka",years:"%d rokov",years2:"%d roky",wordSeparator:" ",numbers:[]},ctm.fuzzy=function(a){function b(a,b){var c="function"==typeof a?a(b,e):a,d=f.numbers&&f.numbers[b]||b;return c.replace(/%d/i,d)}var c=Date.now();if(a>c){console.warn("Time is in future!",a);var d=new Date(a);return d.toDateString()+" "+d.getHours()+":"+d.getMinutes()+":"+d.getSeconds()}var e=c-a,f=this.fuzzyStrings,g=f.prefixAgo,h=f.suffixAgo,i=Math.abs(e)/1e3,j=i/60,k=j/60,l=k/24,m=l/365,n=45>i&&b(f.seconds,Math.round(i))||90>i&&b(f.minute,1)||45>j&&j>1&&5>j&&b(f.minutes2,Math.round(j))||45>j&&j>=5&&b(f.minutes,Math.round(j))||90>j&&b(f.hour,1)||24>k&&k>1&&5>k&&b(f.hours2,Math.round(k))||24>k&&k>=5&&b(f.hours,Math.round(k))||42>k&&b(f.day,1)||30>l&&l>1&&5>l&&b(f.days2,Math.round(l))||30>l&&l>=5&&b(f.days,Math.round(l))||45>l&&b(f.month,1)||365>l&&l>30&&150>l&&b(f.months2,Math.round(l/30))||365>l&&l>=150&&b(f.months,Math.round(l/30))||1.5>m&&b(f.year,1)||m>1.5&&5>m&&b(f.years2,Math.round(m))||b(f.years,Math.round(m)),o=f.wordSeparator||"";return void 0===f.wordSeparator&&(o=" "),[g,n,h].join(o)},ctm.search=function(a){return String(parseInt(a,10))!==String(a)?void console.log("Only numbers can be entered at the moment.",a):(ctm.clearFilter(),void ctm.refresh(ctm.refreshRate,parseInt(a,10)))},window.onload=function(){ctm.map=function(a){var b=48.14425,c=17.10938,d=16,e={mapbox:ctm.mapboxAccessToken?L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}",{attribution:'© <a href="https://www.mapbox.com/map-feedback/">Mapbox</a> © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap contributors</a>',maxZoom:18,minZoom:13,id:ctm.mapboxId,accessToken:ctm.mapboxAccessToken}):null,osm:L.tileLayer.provider("OpenStreetMap.Mapnik"),transport:L.tileLayer.provider("Thunderforest.Transport")};ctm.icons={trams:"icon-tram",buses:"icon-bus",trolleys:"icon-trolley"};var f=L.map("map",{zoom:d,center:[b,c],layers:[e.osm],zoomControl:!1});ctm.map=f,new L.Control.Zoom({position:"bottomright"}).addTo(f),navigator.geolocation?navigator.geolocation.getCurrentPosition(function(a){f=f.setView([a.coords.latitude,a.coords.longitude],d)}):f.setView([b,c],d),ctm.markMyPosition(5e3);var g={trams:L.layerGroup(),buses:L.layerGroup(),trolleys:L.layerGroup()};f.addLayer(g.trams),f.addLayer(g.buses),f.addLayer(g.trolleys);var h=L.control.layers(null,null,{position:"topright"});h.addBaseLayer(e.osm,"Základná mapa"),e.mapbox&&h.addBaseLayer(e.mapbox,"Mapbox"),h.addBaseLayer(e.transport,"Mapa MHD"),h.addOverlay(g.trams,"Električky"),h.addOverlay(g.buses,"Autobusy"),h.addOverlay(g.trolleys,"Trolejbusy"),h.addTo(f),ctm.overlays=g;var i=document.getElementById("search");return i?(i.addEventListener("keydown",function(a){return 13===a.keyCode&&ctm.search(this.value),!0}),i.addEventListener("search",function(a){this.value.length<1&&(ctm.clearFilter(),ctm.refresh(ctm.refreshRate))})):console.warn("The search element not found!"),ctm.refresh(ctm.refreshRate),f}(window)};